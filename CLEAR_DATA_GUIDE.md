# 清理之前建模数据指南

## 🗑️ 功能说明

自动设置工具现在支持清理之前创建的建模数据，包括：

1. ✅ **生成的预制体**（Gear, Lever, Spring, Ball）
2. ✅ **生成的网格**（GeneratedMeshes文件夹）
3. ✅ **创建的材质**（Materials文件夹）
4. ✅ **创建的场景**（Scenes文件夹）

---

## 🚀 使用方法

### 方法1：自动清理（推荐）

在运行自动设置时，工具会自动清理之前的数据：

1. **打开工具**
   ```
   Tools -> 自动设置工具 -> 一键完成所有设置
   ```

2. **勾选清理选项**
   - 在工具窗口中
   - 勾选 **"清理之前的建模数据"** 复选框
   - 会显示警告信息，说明将删除的内容

3. **点击"开始自动设置"**
   - 工具会先清理数据，然后重新创建

---

### 方法2：仅清理数据

如果只想清理数据而不重新创建：

1. **打开工具**
   ```
   Tools -> 自动设置工具 -> 一键完成所有设置
   ```

2. **点击清理按钮**
   - 在工具窗口底部
   - 找到 **"清理选项"** 部分
   - 点击 **"仅清理之前的建模数据"** 按钮

3. **确认清理**
   - 会弹出确认对话框
   - 点击 **"确定清理"** 确认
   - 或点击 **"取消"** 取消操作

---

## 📋 清理的内容

### 1. 预制体

清理以下预制体：
- `Assets/Prefabs/Generated/Gear.prefab`
- `Assets/Prefabs/Generated/Lever.prefab`
- `Assets/Prefabs/Generated/Spring.prefab`
- `Assets/Prefabs/Generated/Ball.prefab`

如果 `Generated` 文件夹为空，也会被删除。

### 2. 生成的网格

清理以下内容：
- `Assets/GeneratedMeshes/Meshes/` 文件夹中的所有网格文件
- 如果 `GeneratedMeshes` 文件夹为空，也会被删除

### 3. 材质

清理以下材质：
- `Assets/Materials/GearMaterial.mat`
- `Assets/Materials/LeverMaterial.mat`
- `Assets/Materials/SpringMaterial.mat`
- `Assets/Materials/BallMaterial.mat`
- `Assets/Materials/GroundMaterial.mat`

### 4. 场景

清理以下场景：
- `Assets/Scenes/MainMenu.unity`
- `Assets/Scenes/Gameplay.unity`
- `Assets/Scenes/LevelEditor.unity`

**注意**：如果场景当前已打开，工具会先关闭场景再删除。

---

## ⚠️ 注意事项

### 1. 数据备份

清理操作**无法撤销**，建议：
- 在清理前备份重要数据
- 使用版本控制（Git）管理项目
- 确认不需要这些数据后再清理

### 2. 场景关闭

如果场景当前已打开：
- 工具会自动关闭场景
- 但不会保存未保存的更改
- 建议先保存场景再清理

### 3. 其他资源

工具**不会**清理：
- 你自己创建的模型和资源
- 不在指定路径的资源
- 其他文件夹中的内容

---

## 🔍 清理过程

### 自动清理流程

1. **检查资源是否存在**
   - 只删除存在的资源
   - 不存在的资源会被跳过

2. **删除资源**
   - 使用 `AssetDatabase.DeleteAsset()` 删除
   - 记录删除的每个资源

3. **清理空文件夹**
   - 如果文件夹为空，也会被删除

4. **刷新资源数据库**
   - 自动刷新Unity的资源数据库
   - 确保Project窗口更新

---

## 📝 使用场景

### 场景1：重新开始

如果你想重新开始设置：

1. 勾选"清理之前的建模数据"
2. 点击"开始自动设置"
3. 所有数据会被清理并重新创建

### 场景2：只清理特定资源

如果你只想清理某些资源：

1. 使用"仅清理之前的建模数据"按钮
2. 手动删除不需要的资源
3. 然后运行自动设置重新创建

### 场景3：保留部分数据

如果你想保留部分数据：

1. **不要勾选清理选项**
2. 工具会跳过已存在的资源
3. 只创建缺失的资源

---

## 🎯 快速操作

### 清理并重新创建

```
1. Tools -> 自动设置工具 -> 一键完成所有设置
2. 勾选"清理之前的建模数据"
3. 点击"开始自动设置"
4. 等待完成
```

### 仅清理数据

```
1. Tools -> 自动设置工具 -> 一键完成所有设置
2. 滚动到底部
3. 点击"仅清理之前的建模数据"
4. 确认清理
```

---

## ✅ 验证清理结果

清理完成后，检查：

1. **Project窗口**
   - 检查预制体是否已删除
   - 检查网格是否已删除
   - 检查材质是否已删除
   - 检查场景是否已删除

2. **Console窗口**
   - 查看清理日志
   - 确认所有资源都已删除

3. **文件夹结构**
   - 检查空文件夹是否已删除

---

## 🆘 常见问题

### 问题1：清理后资源还在

**原因**：
- 资源可能在其他位置
- 资源可能被其他文件引用

**解决**：
- 手动检查资源位置
- 手动删除资源

### 问题2：场景无法删除

**原因**：
- 场景可能正在使用
- 场景可能被锁定

**解决**：
- 关闭所有场景
- 重新运行清理

### 问题3：清理后想恢复

**解决**：
- 使用版本控制恢复
- 或重新运行自动设置

---

**使用清理功能可以快速重置项目设置！** 🗑️

